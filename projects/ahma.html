---
layout: projectlayout
title: Projects - Ahma
js: ahma
css: ahma
permalink: ahma/
---

<div class="row">
    <div class="span12">
        <h2>Ahma</h2>

        <div class="right figure">
            <img alt="A photo taken remotely at July, 2010." src="/images/projects/ahma/photo1.jpg" />
            <p class="caption">A remote photograph taken at 7 am, July 6th, 2010.</p>
        </div>

        <p class="teaser">Remote monitoring and control station based on a single-board-computer, and embedded Linux.</p>

        <p>Project Ahma started in June, 2010. Ahma is a test-bed located in <a href="http://en.wikipedia.org/wiki/Ylitornio">Ylitornio</a>, Finland. It is <a href="../professionals#zouppen">Zouppen</a>'s personal project which some day may grow to full-featured real estate remote management and condition contol framework.</p>

        <p>Ahma was my dream for many years. My expertise of Linux and electronics grew to a point where I thought labs and desktop computers were not enough. The next step would be fiddling with real hardware in real environments where network connectivity and supply of electricity is not always hearty.</p>

        <h3>Moving to indoors</h3>

        <p>The location of Ahma is 40 km south from the Polar Circle and the winter was coming. The days on the riverside location got shorter and shorter and the photovoltaic cell provided less and less power. When the average electricity production went below 5 watts, the batteries were drained and the station went down in October, 2010.</p>

        <p>Due to the conditions I moved the station indoors to a house my granparents used to live. The house is connected to &quot;normal&quot;  electricity grid, but it has weekly blackouts lasting no more than some seconds. That's too much for computers so I bought <a href="http://www.mini-box.com/picoUPS-100-12V-DC-micro-UPS-system-battery-backup-system?sc=8&category=981">picoUPS-100</a> and a battery to survive those breaks. The system went back online in November, 2010.</p>

        <h3>Hardware</h3>

        <div class="right figure">
            <img alt="The computer box at the riverside location." src="/images/projects/ahma/photo2.jpg" />
            <p class="caption">The computer box at the riverside location.</p>
        </div>

        <p>Original design as seen on the right hand side:</p>

        <ul class="simple">
            <li>Technologic Systems <a href="http://www.embeddedarm.com/products/board-detail.php?product=TS-7200">TS-7200</a></li>
            <li>200 MHz ARM9 CPU</li>
            <li>Linux 2.6.34</li>
            <li>Canon Powershot digital pocket camera</li>
            <li>Maxim 1-wire bus connected to TS-7200 GPIO.</li>
            <li><a href="http://shop.tuxgraphics.org/electronic/detail_ds18s20.html">DS18S20</a> temperature sensor</li>
            <li><a href="http://en.wikipedia.org/wiki/Huawei_E220">Huawei E220</a> HSDPA Modem</li>
        </ul>

        <p>Second design since November, 2010:</p>
        
        <ul class="simple">
            <li>All the above</li>
            <li><a href="http://www.mini-box.com/picoUPS-100-12V-DC-micro-UPS-system-battery-backup-system?sc=8&category=981">picoUPS-100</a> DC UPS board</li>
            <li>Sealed lead acid battery</li>
            <li>Power outage detection circuit</li>
            <li>IR transmitter for controlling heat pump</li>
        </ul>

        <p>The power outage detection circuit is self designed. It is connected to the GPIO of TS-7200. It's quite staightforwand. Schematics coming later.</p>

        <p>The <a href="http://www.tkk.fi/Misc/Electronics/circuits/ir_send.html">IR transmitter</a> is originally designed by Tomi Engdahl and it is currently assembled on a bread board. The circuit is connected to GPIO of TS-7200. Software for controlling the heat pump is not yet done.</p>

        <h3>Software</h3>

        <p>To add kernel support you need to add some platform data to TS-7200. If you like, you may define your own machine to Linux kernel, but I have just modified the existing TS-7200 information. It is straightforward because Linux has the GPIO driver and DS1820 driver, all we need is to tell Linux to look for DS1820 from a given GPIO port.</p>

        <p>I have connected the bus to DIO1 which is GPIO 8 on processor. <a href="/projects/kernel.patch">Here's my kernel patch</a>.</p>

        <p>After updating the kernel the plain-text measurement are readable from the /sys file system. Also, some kernel messages are generated when a sensor is detected at boot time.</p>

        <p>Please contact me if you have any questions! :-) Just e-mail me (joel.lehtonen Ã¤t iki.fi). Also, you can find me as Zouppen on IRCNet.</p>

        <h3>Gallery</h3>
        
        <div class="caro" id="gallery">
            <div class="prev button"></div>
            <div class="next button"></div>
            <div class="slides">
                <div title="Original battery">
                    <img alt="A photo taken remotely at July, 2010." src="/images/projects/ahma/photo3.jpg" />
                    <p>Original battery on the left. Unfinished "artificial" battery on the right side.</p>
                </div>
                <div title="Artificial battery">
                    <img alt="Artificial battery" src="/images/projects/ahma/photo4.jpg" />
                    <p>Artificial battery for Canon pocket cameras. Ingredients include plastic cover plate and contactors from a unrecognized broken electric device. The diode is used to drop voltage from 5 volts to 4.3 volts.</p>
                </div>
                <div title="Fastened camera">
                    <img alt="Fastened camera" src="/images/projects/ahma/photo5.jpg" />
                    <p>The camera is fixed upside down to the baulk of timber. The longer cable is the 5V power cord and the another is a regular USB cable.</p>
                </div>
                <div title="Camera from the outside">
                    <img alt="Camera from the outside" src="/images/projects/ahma/photo6.jpg" />
                    <p>The camera has a clear view to the Tornio river from a hole between baulks.</p>
                </div>
                <div title="Fastening the computer box">
                    <img alt="Fastening the computer box" src="/images/projects/ahma/photo7.jpg" />
                    <p>I am connecting electricity from solar electricity set (PV) to the computer.</p>
                </div>
                <div title="The box">
                    <img alt="The box" src="/images/projects/ahma/photo8.jpg" />
                    <p>The computer box. UMTS module is a taped to the cover and the computer on the right.</p>
                </div>
                <div title="The box, fastened">
                    <img alt="The box, fastened" src="/images/projects/ahma/photo2.jpg" />
                    <p>Here is the final computer box. 1-wire bus is not yet connected.</p>
                </div>
                <div title="Photo">
                    <img alt="A photo taken remotely at July, 2010" src="/images/projects/ahma/photo1.jpg" />
                    <p>A photo taken remotely at July, 2010.</p>
                </div>
            </div>
            <div class="carouselNavi"></div>
        </div>

        <h3>Other</h3>
        <p><a href="/projects/temp-riverside.pdf">Temperature during several months at the riverside location.</a></p>
    </div>
</div>

